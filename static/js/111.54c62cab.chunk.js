(this.webpackJsonpSankarGroups=this.webpackJsonpSankarGroups||[]).push([[111],{1294:function(e,t,a){},1728:function(e,t,a){"use strict";a.r(t);var n=a(27),c=a(1),s=a(18),r=a.n(s),i=a(45),o=a(129),l=a(522),d=a.n(l),u=a(525),p=a(85),j=a.n(p),m=function(e){return function(t){j.a.get("".concat(i.a.app.ApiUrl,"/group/").concat(e)).then((function(e){t({type:"GET_GROUPS",getGroups:e.data.data})}))}},b=function(e){return function(t){j.a.get("".concat(i.a.app.ApiUrl,"/chat/").concat(e.id),e.id).then((function(a){t({type:"SELECTED_GROUP",data:e}),t({type:"SELECT_CHAT",data:a.data.data[0]})}))}},f=function(e){return function(){var t=Object(u.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.a.get("".concat(i.a.app.ApiUrl,"/group/groupEmployees/").concat(e)).then((function(e){a({type:"GROUP_STAFF",groupStaff:e.data.data})})).catch((function(e){return console.log(e)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},h=a(26),O=a.n(h),x=a(543),g=a.n(x),v=a(1062),N=a(1002),S=a(1085),y=a(1070),k=a(1102),w=a(980),C=a(1115),G=a(995),T=a(1124),A=a(790),_=a(513),U=a(657),E=(a(591),a(536),a(512),a(492)),D=a(6),P=function(e){var t=e.handleProfile,a=e.children;return Object(D.jsxs)("div",{className:"modal-header d-flex align-items-center justify-content-between mb-1",children:[Object(D.jsx)("h5",{className:"modal-title",children:a}),Object(D.jsx)("div",{className:"todo-item-action d-flex align-items-center",children:Object(D.jsx)(w.a,{className:"font-weight-normal mt-25",size:16,onClick:t})})]})},I=function(e){var t,a,n,c=e.isOpen,s=e.groupStaff,r=e.handleProfile,o=e.dispatch,l=e.store,p=null===l||void 0===l?void 0:l.selectedGroup;return Object(D.jsx)(A.a,{isOpen:c,className:"sidebar-lg",contentClassName:"p-0",modalClassName:"modal-slide-in sidebar-todo-modal",children:Object(D.jsxs)(_.a,{id:"form-modal-todo",className:"todo-modal",children:[Object(D.jsxs)(P,{handleProfile:r,children:[Object(D.jsx)(T.a,{})," Group Users"]}),Object(D.jsxs)(U.a,{className:"flex-grow-1 pb-sm-0 pb-3",children:[Object(D.jsx)("ul",{children:(n=s,null===n||void 0===n?void 0:n.map((function(e){if(e.assigned)return Object(D.jsxs)("li",{className:"p-1 style-none",children:[" ",e.label,Object(D.jsx)(C.a,{className:"text-danger pr-0",onClick:function(){o(function(e,t){return function(){var a=Object(u.a)(d.a.mark((function a(n){return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,j.a.delete("".concat(i.a.app.ApiUrl,"/group/").concat(e.id,"/").concat(t)).then((function(t){n({type:"GROUP_STAFF_DELETE",groupStaff:t.data.data}),n(b(e))})).catch((function(e){return console.log(e)}));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(p,e.value))}})," "]})})))}),Object(D.jsx)("strong",{children:"Add New"}),Object(D.jsx)("ul",{children:function(e,t){return null===t||void 0===t?void 0:t.map((function(e){if(!(null===e||void 0===e?void 0:e.assigned))return Object(D.jsxs)("li",{className:"p-1 style-none",children:[" ",e.label,Object(D.jsx)(G.a,{className:"text-danger pr-0",onClick:function(){var t;o((t={selectedGroup:p,item:e},function(){var e=Object(u.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.post("".concat(i.a.app.ApiUrl,"/group/addStaff"),t).then((function(e){a({type:"GROUP_STAFF_DELETE",groupStaff:e.data.data}),a(b(t.selectedGroup))})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}})," "]})}))}(0,s)}),Object(D.jsx)("strong",{className:"pt-2 w-100  d-flex ",children:"Tasks"}),Object(D.jsxs)(E.b,{className:"pt-2 text-success  d-flex ",to:"./todo/completed",children:["Completed Tasks(",null===l||void 0===l||null===(t=l.selectedUser)||void 0===t?void 0:t.completedTasksCount,")"]}),Object(D.jsxs)(E.b,{className:"pt-2 text-danger  d-flex ",to:"./todo",children:["Pending Tasks(",null===l||void 0===l||null===(a=l.selectedUser)||void 0===a?void 0:a.pendingTasksCount,")"]})]})]})})},L=a(592),z=a.n(L),F=a(799),M=a(991),R=a(992),B=a(841),J=a(993),Y=a(508),q=a(487),H=function(e){var t=e.store,a=e.getGroupStaff,s=t.selectedUser,l=t.selectedGroup,d=Object(c.useRef)(null),u=Object(o.b)(),p=Object(c.useState)(""),m=Object(n.a)(p,2),f=m[0],h=m[1],x=Object(c.useState)(!1),w=Object(n.a)(x,2),C=w[0],G=w[1],T=function(){return G(!C)};Object(c.useEffect)((function(){u(a(null===l||void 0===l?void 0:l.id)),Object.keys(s).length&&(r.a.findDOMNode(d.current).scrollTop=Number.MAX_SAFE_INTEGER)}),[s]);var A=Object(c.useState)(),U=Object(n.a)(A,2),E=(U[0],U[1],function(e){e.preventDefault();var t=JSON.parse(localStorage.getItem("userData"))[0];f.length&&(null===l||void 0===l?void 0:l.id)&&(u(function(e,t){return function(a){j.a.post("".concat(i.a.app.ApiUrl,"/chat"),e).then((function(e){a(b(t))}))}}({senderId:t.id,sender_name:t.name,group_id:l.id,message:f},l)),h(""))}),P=function(e){e.preventDefault();var t=JSON.parse(localStorage.getItem("userData"))[0],a=new FormData;a.append("image",e.target.files[0]),a.append("senderId",t.id),a.append("sender_name",t.name),a.append("group_id",l.id),a.append("msg",f),u(function(e,t){return function(a){j.a.post("".concat(i.a.app.ApiUrl,"/upload/image/"),e).then((function(e){a(b(t))}))}}(a,l))},L=Object.keys(s).length&&s.chat?g.a:"div";return Object(D.jsx)("div",{className:"chat-app-window",children:Object(D.jsxs)("div",{className:O()("active-chat",{"d-none":null===s}),children:[Object(D.jsx)("div",{className:"chat-navbar",children:Object(D.jsx)("header",{className:"chat-header",onClick:T,children:Object(D.jsxs)("div",{className:"d-flex align-items-center",children:[Object(D.jsx)(N.a,{size:21})," ",null===l||void 0===l?void 0:l.group]})})}),Object(D.jsx)(L,{ref:d,className:"user-chats",options:{wheelPropagation:!1},children:s.chat?Object(D.jsx)("div",{className:"chats",children:function(){var e=[];s.chat&&(e=s.chat);var t=[],a=e[0]?e[0].senderId:void 0,n={senderId:a,messages:[]};return e.forEach((function(c,s){a===c.senderId?n.messages.push({msg:c.message,file:c.file,time:c.createdAt,name:c.sender_name}):(a=c.senderId,t.push(n),n={senderId:c.senderId,messages:[{msg:c.message,file:c.file,time:c.createdAt,name:c.sender_name}]}),s===e.length-1&&t.push(n)})),t}().map((function(e,t){var a=JSON.parse(localStorage.getItem("userData"))[0],n=e.senderId===a.id?"chat-right":"chat-left";return Object(D.jsx)("div",{className:n,children:Object(D.jsx)("div",{className:"chat-body",children:e.messages.map((function(e){return Object(D.jsxs)("div",{className:"chat-content",children:[Object(D.jsx)("p",{children:e.msg}),e.file?Object(D.jsx)(F.a,{href:"".concat(i.a.app.serverApi,"/images/").concat(e.file),target:"_blank",title:"View file",children:"jpeg"===e.file.split(".").pop()||"jpg"===e.file.split(".").pop()||"png"===e.file.split(".").pop()?Object(D.jsx)("img",{src:"".concat(i.a.app.serverApi,"/images/").concat(e.file),className:"w-100"}):Object(D.jsx)(v.a,{size:38})}):"","chat-right"===n?Object(D.jsx)("small",{className:"text-right pr-1",children:z()(e.time).format("DD:MM:YY kk:ss")}):Object(D.jsxs)("small",{className:"text-right pr-1",children:[e.name," ",z()(e.time).format("DD:MM:YY kk:ss")]})]},e.msg)}))})},t)}))}):Object(D.jsxs)("div",{className:"p-5 text-center text-danger",children:[Object(D.jsx)(N.a,{size:100,className:"pr-1"}),Object(D.jsx)("h1",{children:"Select Group for Chat"})]})}),Object(D.jsxs)(_.a,{className:"chat-app-form",onSubmit:function(e){return E(e)},children:[Object(D.jsxs)(M.a,{className:"input-group-merge mr-1 form-send-message",children:[Object(D.jsx)(R.a,{addonType:"prepend",children:Object(D.jsx)(B.a,{children:Object(D.jsx)(S.a,{className:"cursor-pointer",size:14})})}),Object(D.jsx)(J.a,{value:f,onChange:function(e){return h(e.target.value)},placeholder:"Type your message or use speech to text"}),Object(D.jsx)(R.a,{addonType:"append",children:Object(D.jsx)(B.a,{children:Object(D.jsxs)(Y.a,{className:"attachment-icon mb-0",for:"attach-doc",children:[Object(D.jsx)(y.a,{className:"cursor-pointer text-secondary",size:14}),Object(D.jsx)("input",{type:"file",id:"attach-doc",hidden:!0,onChange:function(e){return P(e)}})]})})})]}),Object(D.jsxs)(q.a,{className:"send",color:"primary",children:[Object(D.jsx)(k.a,{size:14,className:"d-lg-none"}),Object(D.jsx)("span",{className:"d-none d-lg-block",children:"Send"})]})]}),Object(D.jsx)(I,{isOpen:C,handleProfile:T,groupStaff:null===t||void 0===t?void 0:t.groupStaff,selectedGroup:l,dispatch:u,store:t})]})})},V=(a(505),a(1097)),W=a(497),X=function(e){e.handleGroup;var t=e.store,a=e.sidebar,s=e.userSidebarLeft,r=(e.handleUserSidebarLeft,e.handleTaskSidebar),i=(t.userProfile,t.getGroups),l=(t.selectedGroup,Object(o.b)()),d=Object(c.useState)({}),u=Object(n.a)(d,2),p=u[0],j=u[1];return t?Object(D.jsx)("div",{className:"sidebar-left",children:Object(D.jsxs)("div",{className:"sidebar",children:[Object(D.jsx)("div",{className:O()("chat-profile-sidebar",{show:s})}),Object(D.jsxs)(W.a,{className:O()("sidebar-content",{show:!0===a}),children:[Object(D.jsx)("div",{className:"sidebar-close-icon",children:Object(D.jsx)(w.a,{size:14})}),Object(D.jsx)("div",{className:"chat-fixed-search",children:Object(D.jsx)("div",{className:"d-flex align-items-center w-100 danger",children:Object(D.jsxs)(q.a,{color:"danger",onClick:r,children:[Object(D.jsx)(V.a,{size:20}),"New Group"]})})}),Object(D.jsxs)(g.a,{className:"chat-user-list-wrapper list-group",options:{wheelPropagation:!1},children:[Object(D.jsx)("h4",{className:"chat-list-title",children:"Group Chats"}),Object(D.jsx)("ul",{className:"chat-users-list chat-list media-list",children:i.map((function(e){return Object(D.jsx)("li",{className:O()({active:"chat"===p.type&&p.id===e.id}),onClick:function(){return function(e,t){var a=t.id;l(b(t)),j({type:e,id:a})}("chat",e)},children:Object(D.jsx)("div",{className:"chat-info flex-grow-1",children:Object(D.jsxs)("h5",{className:"mb-0",children:[e.group," "]})})},e.id)}))})]})]})]})}):null},K=(a(1294),a(845),a(0)),Q=a(128),Z=a(996),$=a(981),ee=a(632),te=a(549),ae=a(517),ne=["data"],ce=function(e){var t=e.companyBrandStaff,a=e.open,s=e.handleTaskSidebar,r=e.store,o=e.dispatch,l=e.companyList,p=e.brandOptions,b=e.userData,f=Object(c.useState)({value:"",label:"Select Company"}),h=Object(n.a)(f,2),O=h[0],x=h[1],g=Object(c.useState)({value:"",label:"Select Brand"}),v=Object(n.a)(g,2),N=v[0],S=v[1],y=Object(c.useState)({value:"",label:"Select..."}),k=Object(n.a)(y,2),C=k[0],T=k[1],E=function(e,t){"c"===e&&x(t),"b"===e&&S(t),o(function(e){return function(){var t=Object(u.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.a.post("".concat(i.a.app.ApiUrl,"/staff/company-brand"),e).then((function(e){a({type:"COMPANY_STAFF",companyBrandStaff:e.data.data})})).catch((function(e){return console.log(e)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}({company:O.value,brand:N.value}))},P=function(e){var t=e.children,a=e.handleTaskSidebar;return Object(D.jsxs)("div",{className:"modal-header d-flex align-items-center justify-content-between mb-1",children:[Object(D.jsx)("h5",{className:"modal-title",children:t}),Object(D.jsx)("div",{className:"todo-item-action d-flex align-items-center",children:Object(D.jsx)(w.a,{className:"font-weight-normal mt-25",size:16,onClick:a})})]})};return Object(D.jsx)(A.a,{isOpen:a,toggle:s,className:"lg",contentClassName:"p-0",modalClassName:"modal-slide-in sidebar-todo-modal",children:Object(D.jsxs)(_.a,{id:"form-modal-todo",className:"todo-modal",onSubmit:function(e,t){e.preventDefault(),s();var a={};a.company=O.value,a.brand=N.value,a.group=e.target.group.value,a.assignee=C,a.emp_id=null===b||void 0===b?void 0:b.id,console.log(C),o(function(e){return function(){var t=Object(u.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.a.post("".concat(i.a.app.ApiUrl,"/group"),e).then((function(t){a({type:"NEW_GROUP",newStaff:t.data}),a(m(e.emp_id))})).catch((function(e){return console.log(e)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(a))},children:[Object(D.jsxs)(P,{store:r,dispatch:o,children:[Object(D.jsx)(G.a,{}),"  New Group"]}),Object(D.jsxs)(U.a,{className:"flex-grow-1 pb-sm-0 pb-3",children:[Object(D.jsxs)($.a,{children:[Object(D.jsx)(Y.a,{className:"form-label",for:"due-date",children:"Group Name"}),Object(D.jsx)(J.a,{type:"text",name:"group",id:"group",required:!0})]}),Object(D.jsxs)($.a,{children:[Object(D.jsx)(Y.a,{className:"form-label",for:"task-title",children:"Company"}),Object(D.jsx)(te.a,{name:"company",isClearable:!1,className:"react-select",classNamePrefix:"select",options:l,value:O,onChange:function(e){E("c",e)}})]}),Object(D.jsxs)($.a,{children:[Object(D.jsx)(Y.a,{className:"form-label",for:"task-title",children:"Brand"}),Object(D.jsx)(te.a,{name:"brand",isClearable:!1,className:"react-select",classNamePrefix:"select",options:p,value:N,onChange:function(e){E("b",e)}})]}),Object(D.jsxs)($.a,{children:[Object(D.jsx)(Y.a,{className:"form-label",for:"task-assignee",children:"Assignee Employee"}),Object(D.jsx)(te.a,{isMulti:!0,id:"task-assignee",className:"react-select",classNamePrefix:"select",isClearable:!1,options:t,theme:ae.h,onChange:function(e){return T(e)},components:{Option:function(e){var t=e.data,a=Object(Q.a)(e,ne);return Object(D.jsx)(ee.z.Option,Object(K.a)(Object(K.a)({},a),{},{children:Object(D.jsx)(Z.a,{className:"align-items-center",children:Object(D.jsx)(Z.a,{body:!0,children:Object(D.jsx)("p",{className:"mb-0",children:t.label})})})}))}}})]}),Object(D.jsx)(q.a,{type:"submit",className:"mr-1",color:"primary",children:"Submit"}),Object(D.jsx)(q.a,{type:"reset",color:"secondary",outline:!0,children:"Cancel"})]})]})})};t.default=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.chat})),a=(Object(o.c)((function(e){return e.completedTasksCount})),Object(c.useState)(!1)),s=Object(n.a)(a,2),r=s[0],l=s[1],p=function(){return l(!r)},b=Object(c.useState)(!1),h=Object(n.a)(b,2),O=h[0],x=h[1],g=function(){return x(!O)},v=JSON.parse(localStorage.getItem("userData"))[0];return Object(c.useEffect)((function(){e(m(v.id)),e(function(){var e=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("".concat(i.a.app.ApiUrl,"/company/names")).then((function(e){t({type:"GET_COMPANY_LIST",companyList:e.data.data})})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("".concat(i.a.app.ApiUrl,"/brand/names")).then((function(e){t({type:"BRAND_OPTIONS",brandOptions:e.data.data})})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]),Object(D.jsxs)(c.Fragment,{children:[Object(D.jsx)(X,{store:t,sidebar:O,handleSidebar:g,handleTaskSidebar:p,userData:v}),Object(D.jsx)("div",{className:"content-right",children:Object(D.jsx)("div",{className:"content-wrapper",children:Object(D.jsxs)("div",{className:"content-body",children:[Object(D.jsx)("div",{onClick:function(){setUserSidebarLeft(!1)}}),Object(D.jsx)(H,{store:t,handleSidebar:g,getGroupStaff:f,selectedGroup:null===t||void 0===t?void 0:t.selectGroup}),Object(D.jsx)(ce,{open:r,handleTaskSidebar:p,companyList:null===t||void 0===t?void 0:t.companyList,brandOptions:null===t||void 0===t?void 0:t.brandOptions,companyBrandStaff:null===t||void 0===t?void 0:t.companyBrandStaff,store:t,userData:v,dispatch:e})]})})})]})}},512:function(e,t,a){},845:function(e,t,a){}}]);
//# sourceMappingURL=111.54c62cab.chunk.js.map