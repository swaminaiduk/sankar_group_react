(this.webpackJsonpSankarGroups=this.webpackJsonpSankarGroups||[]).push([[111],{1294:function(e,t,a){},1728:function(e,t,a){"use strict";a.r(t);var n=a(27),c=a(1),s=a(18),r=a.n(s),i=a(45),o=a(129),l=a(522),d=a.n(l),u=a(525),p=a(85),j=a.n(p),b=function(e){return function(t){j.a.get("".concat(i.a.app.ApiUrl,"/group/").concat(e)).then((function(e){t({type:"GET_GROUPS",getGroups:e.data.data})}))}},f=function(e){return function(t){j.a.get("".concat(i.a.app.ApiUrl,"/chat/").concat(e.id),e.id).then((function(a){t({type:"SELECTED_GROUP",data:e}),t({type:"SELECT_CHAT",data:a.data.data[0]})}))}},m=function(e){return function(){var t=Object(u.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.a.get("".concat(i.a.app.ApiUrl,"/group/groupEmployees/").concat(e)).then((function(e){a({type:"GROUP_STAFF",groupStaff:e.data.data})})).catch((function(e){return console.log(e)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},h=a(26),O=a.n(h),g=a(543),x=a.n(g),v=a(1062),N=a(1002),S=a(1085),y=a(1070),w=a(1102),k=a(980),A=a(1115),C=a(995),G=a(799),T=a(790),_=a(513),U=a(657),D=(a(591),a(536),a(512),a(492)),E=a(6),P=function(e){var t=e.handleProfile,a=e.children;return Object(E.jsxs)("div",{className:"modal-header d-flex align-items-center justify-content-between mb-1",children:[Object(E.jsx)("h5",{className:"modal-title",children:a}),Object(E.jsx)("div",{className:"todo-item-action d-flex align-items-center",children:Object(E.jsx)(k.a,{className:"font-weight-normal mt-25",size:16,onClick:t})})]})},I=function(e){var t,a,n,c=e.isOpen,s=e.groupStaff,r=e.handleProfile,o=e.dispatch,l=e.store,p=null===l||void 0===l?void 0:l.selectedGroup;return Object(E.jsx)(T.a,{isOpen:c,className:"sidebar-lg",contentClassName:"p-0",modalClassName:"modal-slide-in sidebar-todo-modal",children:Object(E.jsxs)(_.a,{id:"form-modal-todo",className:"todo-modal",children:[Object(E.jsxs)(P,{handleProfile:r,children:[Object(E.jsx)("img",{src:"".concat(i.a.app.serverApi,"/images/").concat(null===p||void 0===p?void 0:p.logo),width:25,height:25}),null===p||void 0===p?void 0:p.group," ",Object(E.jsx)("small",{children:null===p||void 0===p?void 0:p.about}),Object(E.jsx)("br",{})]}),Object(E.jsxs)(U.a,{className:"flex-grow-1 pb-sm-0 pb-3",children:[Object(E.jsx)("p",{children:null===p||void 0===p?void 0:p.description}),Object(E.jsx)("ul",{children:(n=s,null===n||void 0===n?void 0:n.map((function(e){if(e.assigned)return Object(E.jsxs)("li",{className:"pt-1 style-none",children:[" ",e.label,Object(E.jsx)(A.a,{className:"text-danger pr-0",size:18,onClick:function(){o(function(e,t){return function(){var a=Object(u.a)(d.a.mark((function a(n){return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,j.a.delete("".concat(i.a.app.ApiUrl,"/group/").concat(e.id,"/").concat(t)).then((function(t){n({type:"GROUP_STAFF_DELETE",groupStaff:t.data.data}),n(f(e))})).catch((function(e){return console.log(e)}));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(p,e.value))}})," "]})})))}),Object(E.jsx)("strong",{children:"Add New"}),Object(E.jsx)("ul",{children:function(e,t){return null===t||void 0===t?void 0:t.map((function(e){if(!(null===e||void 0===e?void 0:e.assigned))return Object(E.jsxs)("li",{className:"pt-1 style-none",children:[" ",e.label,Object(E.jsx)(C.a,{className:"text-danger pr-0",size:18,onClick:function(){var t;o((t={selectedGroup:p,item:e},function(){var e=Object(u.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.post("".concat(i.a.app.ApiUrl,"/group/addStaff"),t).then((function(e){a({type:"GROUP_STAFF_DELETE",groupStaff:e.data.data}),a(f(t.selectedGroup))})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}})," "]})}))}(0,s)}),Object(E.jsxs)(D.b,{className:"pt-2 text-success  d-flex ",to:"./todo/completed",children:["Completed Tasks(",null===l||void 0===l||null===(t=l.selectedUser)||void 0===t?void 0:t.completedTasksCount,")"]}),Object(E.jsxs)(D.b,{className:"pt-2 text-danger  d-flex ",to:"./todo",children:["Pending Tasks(",null===l||void 0===l||null===(a=l.selectedUser)||void 0===a?void 0:a.pendingTasksCount,")"]}),Object(E.jsx)("strong",{className:"pt-2 w-100  d-flex ",children:"Media & Files"}),Object(E.jsx)("div",{children:function(){var e;return null===l||void 0===l||null===(e=l.groupMedia)||void 0===e?void 0:e.map((function(e){if(!(null===e||void 0===e?void 0:e.assigned))return Object(E.jsx)("div",{className:"float-left p-1",children:e.file?Object(E.jsx)(G.a,{href:"".concat(i.a.app.serverApi,"/images/").concat(e.file),target:"_blank",title:"View file",children:"jpeg"===e.file.split(".").pop()||"jpg"===e.file.split(".").pop()||"png"===e.file.split(".").pop()?Object(E.jsx)("img",{src:"".concat(i.a.app.serverApi,"/images/").concat(e.file),width:60,height:60}):Object(E.jsx)(v.a,{size:60})}):""})}))}()})]})]})})},z=a(592),L=a.n(z),M=a(991),F=a(992),R=a(841),B=a(993),J=a(508),Y=a(487),V=function(e){var t=e.store,a=e.getGroupStaff,s=t.selectedUser,l=t.selectedGroup,d=Object(c.useRef)(null),u=Object(o.b)(),p=Object(c.useState)(""),b=Object(n.a)(p,2),m=b[0],h=b[1],g=Object(c.useState)(!1),k=Object(n.a)(g,2),A=k[0],C=k[1],T=function(){return C(!A)};Object(c.useEffect)((function(){u(a(null===l||void 0===l?void 0:l.id)),Object.keys(s).length&&(r.a.findDOMNode(d.current).scrollTop=Number.MAX_SAFE_INTEGER)}),[s]);var U=Object(c.useState)(),D=Object(n.a)(U,2),P=(D[0],D[1],function(e){e.preventDefault();var t=JSON.parse(localStorage.getItem("userData"))[0];m.length&&(null===l||void 0===l?void 0:l.id)&&(u(function(e,t){return function(a){j.a.post("".concat(i.a.app.ApiUrl,"/chat"),e).then((function(e){a(f(t))}))}}({senderId:t.id,sender_name:t.name,group_id:l.id,message:m},l)),h(""))}),z=function(e){e.preventDefault();var t=JSON.parse(localStorage.getItem("userData"))[0],a=new FormData;a.append("image",e.target.files[0]),a.append("senderId",t.id),a.append("sender_name",t.name),a.append("group_id",l.id),a.append("msg",m),u(function(e,t){return function(a){j.a.post("".concat(i.a.app.ApiUrl,"/upload/image/"),e).then((function(e){a(f(t))}))}}(a,l))},V=Object.keys(s).length&&s.chat?x.a:"div";return Object(E.jsx)("div",{className:"chat-app-window",children:Object(E.jsxs)("div",{className:O()("active-chat",{"d-none":null===s}),children:[Object(E.jsx)("div",{className:"chat-navbar",children:Object(E.jsx)("header",{className:"chat-header",onClick:T,children:Object(E.jsxs)("div",{className:"d-flex align-items-center",onClick:function(){return u((e=null===l||void 0===l?void 0:l.id,function(t){j.a.get("".concat(i.a.app.ApiUrl,"/chat/media/").concat(e)).then((function(e){t({type:"GROUP_MEDIA",data:e.data.data})}))}));var e},children:[Object(E.jsx)(N.a,{size:21})," ",null===l||void 0===l?void 0:l.group]})})}),Object(E.jsx)(V,{ref:d,className:"user-chats",options:{wheelPropagation:!1},children:s.chat?Object(E.jsx)("div",{className:"chats",children:function(){var e=[];s.chat&&(e=s.chat);var t=[],a=e[0]?e[0].senderId:void 0,n={senderId:a,messages:[]};return e.forEach((function(c,s){a===c.senderId?n.messages.push({msg:c.message,file:c.file,time:c.createdAt,name:c.sender_name}):(a=c.senderId,t.push(n),n={senderId:c.senderId,messages:[{msg:c.message,file:c.file,time:c.createdAt,name:c.sender_name}]}),s===e.length-1&&t.push(n)})),t}().map((function(e,t){var a=JSON.parse(localStorage.getItem("userData"))[0],n=e.senderId===a.id?"chat-right":"chat-left";return Object(E.jsx)("div",{className:n,children:Object(E.jsx)("div",{className:"chat-body",children:e.messages.map((function(e){return Object(E.jsxs)("div",{className:"chat-content",children:[Object(E.jsx)("p",{children:e.msg}),e.file?Object(E.jsx)(G.a,{href:"".concat(i.a.app.serverApi,"/images/").concat(e.file),target:"_blank",title:"View file",children:"jpeg"===e.file.split(".").pop()||"jpg"===e.file.split(".").pop()||"png"===e.file.split(".").pop()?Object(E.jsx)("img",{src:"".concat(i.a.app.serverApi,"/images/").concat(e.file),className:"w-100"}):Object(E.jsx)(v.a,{size:38})}):"","chat-right"===n?Object(E.jsx)("small",{className:"text-right pr-1",children:L()(e.time).format("DD:MM:YY kk:ss")}):Object(E.jsxs)("small",{className:"text-right pr-1",children:[e.name," ",L()(e.time).format("DD:MM:YY kk:ss")]})]},e.msg)}))})},t)}))}):Object(E.jsxs)("div",{className:"p-5 text-center text-danger",children:[Object(E.jsx)(N.a,{size:100,className:"pr-1"}),Object(E.jsx)("h1",{children:"Select Group for Chat"})]})}),Object(E.jsxs)(_.a,{className:"chat-app-form",onSubmit:function(e){return P(e)},children:[Object(E.jsxs)(M.a,{className:"input-group-merge mr-1 form-send-message",children:[Object(E.jsx)(F.a,{addonType:"prepend",children:Object(E.jsx)(R.a,{children:Object(E.jsx)(S.a,{className:"cursor-pointer",size:14})})}),Object(E.jsx)(B.a,{value:m,onChange:function(e){return h(e.target.value)},placeholder:"Type your message or use speech to text"}),Object(E.jsx)(F.a,{addonType:"append",children:Object(E.jsx)(R.a,{children:Object(E.jsxs)(J.a,{className:"attachment-icon mb-0",for:"attach-doc",children:[Object(E.jsx)(y.a,{className:"cursor-pointer text-secondary",size:14}),Object(E.jsx)("input",{type:"file",id:"attach-doc",hidden:!0,onChange:function(e){return z(e)}})]})})})]}),Object(E.jsxs)(Y.a,{className:"send",color:"primary",children:[Object(E.jsx)(w.a,{size:14,className:"d-lg-none"}),Object(E.jsx)("span",{className:"d-none d-lg-block",children:"Send"})]})]}),Object(E.jsx)(I,{isOpen:A,handleProfile:T,groupStaff:null===t||void 0===t?void 0:t.groupStaff,selectedGroup:l,dispatch:u,store:t})]})})},q=a(1097),H=a(497),W=function(e){e.handleGroup;var t=e.store,a=e.sidebar,s=e.userSidebarLeft,r=(e.handleUserSidebarLeft,e.handleTaskSidebar),l=(t.userProfile,t.getGroups),d=(t.selectedGroup,Object(o.b)()),u=Object(c.useState)({}),p=Object(n.a)(u,2),j=p[0],b=p[1];return t?Object(E.jsx)("div",{className:"sidebar-left",children:Object(E.jsxs)("div",{className:"sidebar",children:[Object(E.jsx)("div",{className:O()("chat-profile-sidebar",{show:s})}),Object(E.jsxs)(H.a,{className:O()("sidebar-content",{show:!0===a}),children:[Object(E.jsx)("div",{className:"sidebar-close-icon",children:Object(E.jsx)(k.a,{size:14})}),Object(E.jsx)("div",{className:"chat-fixed-search",children:Object(E.jsx)("div",{className:"d-flex align-items-center w-100 danger",children:Object(E.jsxs)(Y.a,{color:"danger",onClick:r,children:[Object(E.jsx)(q.a,{size:20}),"New Group"]})})}),Object(E.jsxs)(x.a,{className:"chat-user-list-wrapper list-group",options:{wheelPropagation:!1},children:[Object(E.jsx)("h4",{className:"chat-list-title",children:"Group Chats"}),Object(E.jsx)("ul",{className:"chat-users-list chat-list media-list",children:l.map((function(e){return Object(E.jsx)("li",{className:O()({active:"chat"===j.type&&j.id===e.id}),onClick:function(){return function(e,t){var a=t.id;d(f(t)),b({type:e,id:a})}("chat",e)},children:Object(E.jsx)("div",{className:"chat-info flex-grow-1",children:Object(E.jsxs)("h5",{className:"mb-0",children:[Object(E.jsx)("img",{src:"".concat(i.a.app.serverApi,"/images/").concat(null===e||void 0===e?void 0:e.logo),width:25,height:25}),"  ",e.group," "]})})},e.id)}))})]})]})]})}):null},X=(a(1294),a(845),a(0)),K=a(128),Q=a(996),Z=a(981),$=a(632),ee=a(549),te=a(517),ae=["data"],ne=function(e){var t=e.companyBrandStaff,a=e.open,s=e.handleTaskSidebar,r=e.store,o=e.dispatch,l=e.companyList,p=e.brandOptions,f=e.userData,m=Object(c.useState)({value:"",label:"Select Company"}),h=Object(n.a)(m,2),O=h[0],g=h[1],x=Object(c.useState)({value:"",label:"Select Brand"}),v=Object(n.a)(x,2),N=v[0],S=v[1],y=Object(c.useState)({value:"",label:"Select..."}),w=Object(n.a)(y,2),A=w[0],G=w[1],D=function(e,t){"c"===e&&g(t),"b"===e&&S(t),o(function(e){return function(){var t=Object(u.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.a.post("".concat(i.a.app.ApiUrl,"/staff/company-brand"),e).then((function(e){a({type:"COMPANY_STAFF",companyBrandStaff:e.data.data})})).catch((function(e){return console.log(e)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}({company:O.value,brand:N.value}))},P=function(e){var t=e.children,a=e.handleTaskSidebar;return Object(E.jsxs)("div",{className:"modal-header d-flex align-items-center justify-content-between mb-1",children:[Object(E.jsx)("h5",{className:"modal-title",children:t}),Object(E.jsx)("div",{className:"todo-item-action d-flex align-items-center",children:Object(E.jsx)(k.a,{className:"font-weight-normal mt-25",size:16,onClick:a})})]})},I=function(e){e.preventDefault();var t,a=new FormData;a.append("logo",e.target.files[0]),o((t=a,function(){var e=Object(u.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.post("".concat(i.a.app.ApiUrl,"/brand/upload"),t).then((function(e){localStorage.setItem("glogo",e.data.data),a({type:"LOGO_UPLOAD",logo:e.data.data})})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))};return Object(E.jsx)(T.a,{isOpen:a,toggle:s,className:"lg",contentClassName:"p-0",modalClassName:"modal-slide-in sidebar-todo-modal",children:Object(E.jsxs)(_.a,{id:"form-modal-todo",className:"todo-modal",onSubmit:function(e,t){e.preventDefault(),s();var a={};a.company=O.value,a.brand=N.value,a.group=e.target.group.value,a.about=e.target.about.value,a.description=e.target.description.value,a.assignee=A,a.emp_id=null===f||void 0===f?void 0:f.id,a.logo=localStorage.getItem("glogo"),o(function(e){return function(){var t=Object(u.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.a.post("".concat(i.a.app.ApiUrl,"/group"),e).then((function(t){a({type:"NEW_GROUP",newStaff:t.data}),a(b(e.emp_id))})).catch((function(e){return console.log(e)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(a)),localStorage.removeItem("glogo")},children:[Object(E.jsxs)(P,{store:r,dispatch:o,children:[Object(E.jsx)(C.a,{}),"  New Group"]}),Object(E.jsxs)(U.a,{className:"flex-grow-1 pb-sm-0 pb-3",children:[Object(E.jsxs)(Z.a,{children:[Object(E.jsx)(J.a,{className:"form-label",for:"due-date",children:"Group Name"}),Object(E.jsx)(B.a,{type:"text",name:"group",id:"group",required:!0})]}),Object(E.jsxs)(Z.a,{children:[Object(E.jsx)(J.a,{className:"form-label",for:"about",children:"About"}),Object(E.jsx)(B.a,{type:"text",name:"about",id:"about"})]}),Object(E.jsxs)(Z.a,{children:[Object(E.jsx)(J.a,{className:"form-label",for:"description",children:"Description"}),Object(E.jsx)(B.a,{type:"text",name:"description",id:"description"})]}),Object(E.jsxs)(Z.a,{children:[Object(E.jsx)(J.a,{className:"form-label",for:"task-title",children:"Company"}),Object(E.jsx)(ee.a,{name:"company",isClearable:!1,className:"react-select",classNamePrefix:"select",options:l,value:O,onChange:function(e){D("c",e)}})]}),Object(E.jsxs)(Z.a,{children:[Object(E.jsx)(J.a,{className:"form-label",for:"task-title",children:"Brand"}),Object(E.jsx)(ee.a,{name:"brand",isClearable:!1,className:"react-select",classNamePrefix:"select",options:p,value:N,onChange:function(e){D("b",e)}})]}),Object(E.jsxs)(Z.a,{children:[Object(E.jsx)(J.a,{className:"form-label",for:"task-assignee",children:"Assignee Employee"}),Object(E.jsx)(ee.a,{isMulti:!0,id:"task-assignee",className:"react-select",classNamePrefix:"select",isClearable:!1,options:t,theme:te.h,onChange:function(e){return G(e)},components:{Option:function(e){var t=e.data,a=Object(K.a)(e,ae);return Object(E.jsx)($.z.Option,Object(X.a)(Object(X.a)({},a),{},{children:Object(E.jsx)(Q.a,{className:"align-items-center",children:Object(E.jsx)(Q.a,{body:!0,children:Object(E.jsx)("p",{className:"mb-0",children:t.label})})})}))}}})]}),Object(E.jsxs)(Z.a,{children:[Object(E.jsx)(J.a,{for:"branch",children:"Profile"}),Object(E.jsx)(B.a,{name:"logo",type:"file",onChange:function(e){return I(e)},accept:"image/png, image/gif, image/jpeg"})]}),Object(E.jsx)(Y.a,{type:"submit",className:"mr-1",color:"primary",children:"Submit"}),Object(E.jsx)(Y.a,{type:"reset",color:"secondary",outline:!0,children:"Cancel"})]})]})})};t.default=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.chat})),a=Object(c.useState)(!1),s=Object(n.a)(a,2),r=s[0],l=s[1],p=function(){return l(!r)},f=Object(c.useState)(!1),h=Object(n.a)(f,2),O=h[0],g=h[1],x=Object(c.useState)(!1),v=Object(n.a)(x,2),N=v[0],S=v[1],y=function(){return S(!N)},w=JSON.parse(localStorage.getItem("userData"))[0];return Object(c.useEffect)((function(){e(b(w.id)),e(function(){var e=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("".concat(i.a.app.ApiUrl,"/company/names")).then((function(e){t({type:"GET_COMPANY_LIST",companyList:e.data.data})})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("".concat(i.a.app.ApiUrl,"/brand/names")).then((function(e){t({type:"BRAND_OPTIONS",brandOptions:e.data.data})})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]),Object(E.jsxs)(c.Fragment,{children:[Object(E.jsx)(W,{store:t,sidebar:N,handleSidebar:y,handleTaskSidebar:p,userData:w}),Object(E.jsx)("div",{className:"content-right",children:Object(E.jsx)("div",{className:"content-wrapper",children:Object(E.jsxs)("div",{className:"content-body",children:[Object(E.jsx)("div",{onClick:function(){setUserSidebarLeft(!1)}}),Object(E.jsx)(V,{store:t,handleSidebar:y,getGroupStaff:m,selectedGroup:null===t||void 0===t?void 0:t.selectGroup}),Object(E.jsx)(ne,{open:r,handleTaskSidebar:p,companyList:null===t||void 0===t?void 0:t.companyList,brandOptions:null===t||void 0===t?void 0:t.brandOptions,companyBrandStaff:null===t||void 0===t?void 0:t.companyBrandStaff,store:t,userData:w,dispatch:e,handleMedia:function(){return g(!O)},media:null===t||void 0===t?void 0:t.groupMedia})]})})})]})}},512:function(e,t,a){},845:function(e,t,a){}}]);
//# sourceMappingURL=111.4eb8c10e.chunk.js.map